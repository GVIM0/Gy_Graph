<!DOCTYPE html>
<html>
    <head>
        <title>Home</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="shortcut icon" href="Imagenes/iconoSuperior.png">
        <link rel="stylesheet" type="text/css" href="CSSito/cssBotones.css" media="screen">

        <style>
            .transition {
                transition-property: opacity, left;
                transition-duration: 3s, 5s;
            }
            .btn2 {
                display: block;
            }

            .btn6 {
                display: none;
            }

        </style>

        <script>

            function redirect() {
            // Agrega la clase CSS para la transición
            document.body.classList.add("transition");
            // Espera 0.5 segundos para que termine la transición
            setTimeout(function () {
            // Redirecciona a la otra página
            window.location.href = "Ajustes.html";
            }, 500);
            }

            function saltar_tuto() {
            var xhr = new XMLHttpRequest();
            xhr.open("GET", "JSP/SalTu.jsp", true);
            xhr.onreadystatechange = function () {
            if (xhr.readyState === 4 && xhr.status === 200) {
            var response = JSON.parse(xhr.responseText);
            console.log(musica);
            if (musica === "Activado") {
            Sonidito.play();
            } else {
            Sonidito.pause();
            }
            } else {
            console.log("Error en la solicitud AJAX");
            }
            };
            xhr.send();
            }

        </script>
    </head>
    <body>
        <div class="Contenedor">


            <header id="header">
                <button class="btn4" onclick="redirect()" style="top: 5%;
                        left: 90%;
                        transform: translate(-10%, -10%)">
                    Ajustes
                </button>

                <!--onclick="location.href = 'Manual.html';"-->
                <button class="btn5" id="btn5" style="top: 5%;
                        left: 80%;
                        transform: translate(-10%, -10%);" onclick="location.href = 'Manual.html';">
                    Manual
                </button>
                <button class="btn6" onclick="location.href = 'Perfil.jsp';" style="top: 5%;
                        left: 5%;
                        transform: translate(-10%, -10%);">
                    Perfil
                </button>
            </header>

            <div class="header finisher-header" style="width: 100%; height: 100vh;" >

                <div class="fondo"> 
                    <img src="Imagenes/mountains.png" alt="Mountains" style="width: 100%; height: 99.5vh;">
                    <div class="Centro">
                        <div class="titulo">
                            <img src="Imagenes/TituloGy.png" width="536px" height="107px">
                        </div>

                        <button class="btn1" onclick="location.href = 'Niveles.html'" style="top: 40%;
                                left: 50%;
                                transform: translate(-50%, -50%);">
                            Iniciar
                        </button>

                        <button type="button" class="btn" id="btn">
                            <!--onclick="location.href = 'Logros.html';"-->
                            <strong>Logros</strong>
                            <div id="container-stars">

                                <div id="stars"></div>
                            </div>
                        </button>

                       
                        <div class="Bajo">
                        </div>

                        <!--                        <div class="arrow" style="   position: absolute; top: 80%; left: 86%">
                                                </div>-->
                        <!--                        <div id="image-container">
                                                    <img id="image" src="" alt="Imagen">
                                                </div>-->
                        <button class="btn2" onclick="location.href = 'Login.jsp';" style="top: 90%;
                                left: 90%;
                                transform: translate(-10%, -10%)">
                            Login
                        </button>

                        <!--onclick="location.href = 'AcercaDe.html';"-->
                        <button class="btn3" id="btn3" style="top: 90%;
                                left: 5%;
                                transform: translate(-10%, -10%)">
                            Acerca de
                        </button>
                    </div>
                </div>
            </div>

        </div>
        <script src="JS/finisher-header.es5.min.js" type="text/javascript"></script>
        <!--        <script src="JS/sweetalert2.min.js"></script>
                <link rel="stylesheet" href="CSSito/sweetalert2.min.css">-->
        <script src="JS/jsAlert.js"></script>
        <audio id="Sonido" name="Sonido" loop> 
            <source src="Audio/Perfil.mp3" type="audio/mpeg"></source>
        </audio>
        <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
        <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    </body>
    <script>
                            document.addEventListener("DOMContentLoaded", function (event) {
                            var xhr = new XMLHttpRequest();
                            xhr.open("GET", "JSP/Confi.jsp", true);
                            xhr.onreadystatechange = function () {
                            if (xhr.readyState === 4 && xhr.status === 200) {
                            var response = JSON.parse(xhr.responseText);
                            var musica = response.Music;
                            var Sonidito = document.getElementById("Sonido");
                            console.log(musica);
                            if (musica === "Activado") {
                            Sonidito.play();
                            } else {
                            Sonidito.pause();
                            }
                            } else {
                            console.log("Error en la solicitud AJAX");
                            }
                            };
                            xhr.send();
                            $.ajax({
                            url: "JSP/Sesion_Activada.jsp",
                                    method: "GET",
                                    success: function (response) {
                                    var valor = response.trim();
                                    console.log(valor);
                                    if (valor !== "Sesión no Iniciada") {
                                    var btn2 = document.querySelector(".btn2");
                                    var btn6 = document.querySelector(".btn6");
                                    btn2.style.display = 'none';
                                    btn6.style.display = 'block';
                                    
                                    
                                    }
                                     else {
                            if (Tut2 === "Si" && Tut21 === "Si") {

                            Swal.fire({
                            title: 'Ajustes y Perfil',
                                    html: '<div style="text-align: center;">\n\
                                     Una vez registrado continuemos nuestro recorrido\n\
                                    Como usted podra ver hay dos botones en la árte superior<br>\n\
                                    Ajustes  y Perfil, seleccione el que usted desee</div>',
                                    icon: 'info',
                                    confirmButtonText: 'Ok',
                                    confirmButtonColor: '#000',
                                    background: 'linear-gradient(-45deg, #7e03aa, #0033ff, #8000ff)',
                                    color: '#fff',
                                    allowOutsideClick: true,
                                    allowEscapeKey: true,
                                    allowEnterKey: true

                            });
                            var Tut21 = "No";
                            $.ajax({
                            url: "JSP/SalTu.jsp",
                                    method: "POST",
                                    data: {varT2: Tut21},
                                    success: function (response) {
                                    console.log(response);
                                    },
                                    error: function () {
                                    alert("Error al enviar la variable al JSP");
                                    }
                            });
                            } else {
                            if (Tut3 === "Si" && Tut31 === "Si") {
                            Swal.fire({
                            title: 'Videojuego',
                                    html: '<div style="text-align: center;">\n\
                                    Una vez registrado continuemos nuestro recorrido\n\
                                    Como usted podra ver hay dos botones en la árte superior<br>\n\
                                    Ajustes  y Perfil, seleccione el que usted desee</div>',
                                    icon: 'info',
                                    confirmButtonText: 'Ok',
                                    confirmButtonColor: '#000',
                                    background: 'linear-gradient(-45deg, #ffae00, #7e03aa, #00fffb)',
                                    color: '#fff',
                                    allowOutsideClick: true,
                                    allowEscapeKey: true,
                                    allowEnterKey: true
                            });
                            var Tut31 = "No";
                            $.ajax({
                            url: "JSP/SalTu.jsp",
                                    method: "POST",
                                    data: {varT3: Tut31},
                                    success: function (response) {
                                    console.log(response);
                                    },
                                    error: function () {
                                    alert("Error al enviar la variable al JSP");
                                    }
                            });
                            } else {
                            $.ajax({
                            url: "JSP/Checador.jsp",
                                    method: "GET",
                                    success: function (response) {
                                    var valor = response.trim();
                                    if (valor === "SI") {
                                    $.ajax({
                                    url: "JSP/Registrado.jsp",
                                            method: "GET",
                                            success: function (response) {
                                            var valor = response.trim();
                                            do {

                                            $.ajax({
                                            url: "JSP/Sesion_Activada.jsp",
                                                    method: "GET",
                                                    success: function (response) {
                                                    var valor = response.trim();
                                                    console.log(valor);
                                                    if (valor !== "Sesión no Iniciada") {
                                                    Swal.fire({
                                                    title: 'Registro',
                                                            text: 'Registro Exitoso',
                                                            icon: 'success',
                                                            confirmButtonText: 'Ok',
                                                            confirmButtonColor: '#000',
                                                            background: 'linear-gradient(-45deg, #ffae00, #7e03aa, #00fffb)',
                                                            color: '#fff',
                                                            allowOutsideClick: true,
                                                            allowEscapeKey: true,
                                                            allowEnterKey: true
                                                    });
                                                    } else {
                                                    Swal.fire({
                                                    title: 'Registro Erroneo',
                                                            text: 'Usuario ya Existente',
                                                            icon: 'error',
                                                            confirmButtonText: 'Ok',
                                                            confirmButtonColor: '#000',
                                                            background: 'linear-gradient(-45deg, #ffae00, #7e03aa, #00fffb)',
                                                            color: '#fff',
                                                            allowOutsideClick: true,
                                                            allowEscapeKey: true,
                                                            allowEnterKey: true
                                                    });
                                                    }
                                                    },
                                                    error: function () {
                                                    alert("Error al obtener el valor de la variable de Java");
                                                    }
                                            });
                                            } while (false);
                                            },
                                            error: function () {
                                            alert("Error al obtener el valor de la variable de Java");
                                            }
                                    });
                                    }
                                    },
                                    error: function () {
                                    alert("Error al obtener el valor de la variable de Java");
                                    }
                            });
                            }

                            }
                            }
                                    },
                                    error: function () {
                                    alert("Error al obtener el valor de la variable de Java");
                                    }
                            });
                            var xhr1 = new XMLHttpRequest();
                            xhr1.open("GET", "JSP/Var_Tuto.jsp", true);
                            xhr1.onreadystatechange = function () {
                            if (xhr1.readyState === 4 && xhr1.status === 200) {
                            var response = JSON.parse(xhr1.responseText);
                            var Tut1 = response.T1;
                            var Tut11 = response.It1;
                            var Tut2 = response.T2;
                            var Tut21 = response.It2;
                            var Tut3 = response.T3;
                            var Tut31 = response.It3;
                            console.log(Tut1);
                            console.log(Tut21);
                            console.log(Tut2);
                            if (Tut1 === "Si" && Tut11 === "Si") {


                            Swal.fire({
                            title: 'Bienvenida',
                                    html: '<div style="text-align: center;">\n\
                                                Bienvenido a Gy-Graph, por favor permítame guiarlo. \n\
                                                Comencemos con su registro. <br>A continuacion presione el botón de login</div>',
                                    icon: 'info',
                                    confirmButtonText: 'Ok',
                                    confirmButtonColor: '#000',
                                    background: 'linear-gradient(-45deg, #7e03aa, #0033ff, #8000ff)',
                                    color: '#fff',
                                    allowOutsideClick: true,
                                    allowEscapeKey: true,
                                    allowEnterKey: true

                            });
                            var Tut11 = "No";
                            $.ajax({
                            url: "JSP/SalTu.jsp",
                                    method: "POST",
                                    data: {varT: Tut11},
                                    success: function (response) {
                                    console.log(response);
                                    },
                                    error: function () {
                                    alert("Error al enviar la variable al JSP");
                                    }
                            });
                            } 
                            } else {
                            console.log("Error en la solicitud AJAX");
                            }
                            };
                            xhr1.send();
                            });
    </script>

    <script type="text/javascript">
        new FinisherHeader({
        "count": 100,
                "size": {
                "min": 2,
                        "max": 8,
                        "pulse": 0
                },
                "speed": {
                "x": {
                "min": 0,
                        "max": 0.4
                },
                        "y": {
                        "min": 0,
                                "max": 0.6
                        }
                },
                "colors": {
                "background": "#201e30",
                        "particles": [
                                "#fbfcca",
                                "#d7f3fe",
                                "#ffd0a7"
                        ]
                },
                "blending": "overlay",
                "opacity": {
                "center": 1,
                        "edge": 0
                },
                "skew": 0,
                "shapes": [
                        "c"
                ]
        });
    </script>
</html>
