<!DOCTYPE html>
<html>
    <head>
        <title>Ajustes | Gy-Graph</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" type="text/css" href="CSSito/cssAjustes.css">
        <link rel="shortcut icon" href="Imagenes/iconoSuperior.png">
        <link rel="stylesheet" type="text/css" href="CSSito/cssRegresar.css">
        <script>

            function Musica1() {
                var Sonidito = document.getElementById("Sonido");
                var Mus = document.getElementById("Musica").checked;
                console.log(Mus);

                if (Mus === true) {
                    Sonidito.play();
                } else {
                    Sonidito.pause();
                }
            }
        </script>
    </head>
    <body>
        <form action="JSP/Ajustes.jsp" method="post">

            <audio id="Sonido" name="Sonido" loop> 
                <source src="Audio/M_Lobby.mp3" type="audio/mpeg"></source>
            </audio>
            <button class="ButtonRegresar" onclick="location.href = 'javascript: history.go(-1)';">
            </button>
            <div class="contenedor1" style="position: absolute; top: 30%; left:33%;
                 transform: translate(-50% , -50%);">
                <h1>Música</h1>
                <div class="contenedor">
                    <label class="switch">
                        <input type="checkbox" id="Musica" name="Musica" class="input" onclick="Musica1()"> 
                        <div class="rail">
                            <span class="circle"></span>
                        </div>
                        <span class="indicador"></span>
                    </label>
                </div>
            </div>
            <div class="contenedor1" style="position: absolute; top: 30%; left:66%;
                 transform: translate(-50% , -50%);">
                <h1>Tipo de teclado</h1>
                <div class="combitos">
                    <select id="TipoTeclado" name="TipoTeclado">
                        <option value="Spa_Tec">Español (Predeterminado)</option>
                        <option value="Eng_Tec">Inglés</option>
                    </select>
                    <i></i>
                </div>
            </div>
            <div class="contenedor1" style="position: absolute; top: 58%; left:66%;
                 transform: translate(-50% , -50%);">
                <h1>Idioma</h1>
                <div class="combitos">
                    <select id="TipoIdioma" name="TipoIdioma">
                        <option value="Spa_Idio">Español (Predeterminado)</option>
                        <option value="Eng_Idio">Inglés</option>
                    </select>
                    <i></i>
                </div>
            </div>
            <div class="divBotones" style="position: absolute; top: 60%; left:33%;
                 transform: translate(-50% , -50%);">
                <button class="botones" onclick="location.href = 'PoliticasDePrivacidad.html';
                        target = '_blank'" disabled>
                    <h1>Políticas de privacidad</h1>
                </button>
            </div>
            <div class="divBotones" style="position: absolute; top: 10%; left:90%;
                 transform: translate(-50% , -50%);">
                <input class="botones" type="submit" value="Guardar" />
            </div>

            <div class="divContact" style=" align-items: normal; position: absolute; top: 83%; left:50%;
                 transform: translate(-50% , -50%);">

                <div class="listas">
                    <br><br>
                    <table style="width: 100%; text-align: center;">
                        <th colspan="2"><h1>Contáctanos</h1></th>
                        <tr>
                            <td><a href="https://instagram.com/gy_graph?igshid=ZDdkNTZiNTM=">Instagram</a></td>
                            <td>
                                <div class="imagen">
                                    <a href="https://instagram.com/gy_graph?igshid=ZDdkNTZiNTM=">
                                        <img src="Imagenes/Icon_Instagram.png"  width="35%" height="35%"> 
                                    </a>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td><a href="https://www.facebook.com/profile.php?id=100092322790344&mibextid=ZbWKwL">Facebook</a> </td>
                            <td>
                                <div class="imagen">
                                    <a href="https://www.facebook.com/profile.php?id=100092322790344&mibextid=ZbWKwL">
                                        <img src="Imagenes/Icon_Facebook.png" width="35%" height="35%">
                                    </a>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <a href="mailto:gygraph@gmail.com">Correo electronico</a></td>
                            <td>
                                <div class="imagen">
                                    <a href="mailto:gygraph@gmail.com"">
                                        <img src="Imagenes/Icon_Email.png" width="40%" height="30%"> 
                                    </a>
                                </div>
                            </td>
                        </tr>
                    </table>
                </div>

            </div>
        </form>


    </body>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
                    $(document).ready(function () {
                        $.ajax({
                            url: "JSP/Sesion_Activada.jsp",
                            method: "GET",
                            success: function (response) {
                                var valor = response.trim();
                                if (valor === "Sesión no Iniciada") {
                                    Swal.fire({
                                        title: 'Peligro',
                                        text: 'Usted no ha iniciado sesion, ninguna dato se guardara',
                                        icon: 'error',
                                        confirmButtonText: 'Ok',
                                        confirmButtonColor: '#000',
                                        background: 'linear-gradient(-45deg, #ffae00, #7e03aa, #00fffb)',
                                        color: '#fff',
                                        allowOutsideClick: true,
                                        allowEscapeKey: true,
                                        allowEnterKey: true
                                    });
                                }
                            },
                            error: function () {
                                alert("Error al obtener el valor de la variable de Java");
                            }
                        });



                        var xhr2 = new XMLHttpRequest();
                        xhr2.open("GET", "JSP/Var_Tuto.jsp", true);
                        xhr2.onreadystatechange = function () {
                            if (xhr2.readyState === 4 && xhr2.status === 200) {
                                var response = JSON.parse(xhr2.responseText);
                                var Tut1 = response.T1;
                                var Tutp1 = response.Itp2;
                                console.log(Tut1);
                                console.log(Tutp1);
                                if (Tutp1 === "Si") {

                                    Swal.fire({
                                        title: 'Bienvenida',
                                        html: '<div style="text-align: center;">\n\
                                        Como usted podra notar en esta seccion sera capaz de modificar sus preferencias.\n\
                                        Respecto al juego, lamentamos los incovenientes pero por el momento solo contamos con Musica</div>',
                                        icon: 'info',
                                        confirmButtonText: 'Ok',
                                        confirmButtonColor: '#000',
                                        background: 'linear-gradient(-45deg, #7e03aa, #0033ff, #8000ff)',
                                        color: '#fff',
                                        allowOutsideClick: true,
                                        allowEscapeKey: true,
                                        allowEnterKey: true
                                    });

                                    var Tut2p = "No";
                                    $.ajax({
                                        url: "JSP/SalTu.jsp",
                                        method: "POST",
                                        data: {var2p: Tut2p},
                                        success: function (response) {
                                            console.log(response);
                                        },
                                        error: function () {
                                            alert("Error al enviar la variable al JSP");
                                        }
                                    });
                                }

                            } else {
                                console.log("Error en la solicitud AJAX");
                            }
                        };
                        xhr2.send();


                        var xhr = new XMLHttpRequest();
                        xhr.open("GET", "JSP/Confi.jsp", true);
                        xhr.onreadystatechange = function () {
                            if (xhr.readyState === 4 && xhr.status === 200) {
                                var response = JSON.parse(xhr.responseText);
                                var tipTec = response.Tip_T;
                                var tipIdi = response.Tip_I;
                                var musica = response.Music;
                                var selecT = document.getElementById("TipoTeclado");
                                var selecI = document.getElementById("TipoIdioma");
                                var selecM = document.getElementById("Musica");
                                var Sonidito = document.getElementById("Sonido");
                                if (tipTec === "Spa_Tec" || tipTec === "Eng_Tec") {
                                    selecT.value = tipTec;
                                }
                                if (tipIdi === "Spa_Idio" || tipIdi === "Eng_Idio") {
                                    selecI.value = tipIdi;
                                }

                                if (musica === "Activado") {
                                    var musica2 = true;
                                    selecM.checked = musica2;
                                    Sonidito.play();
                                } else {
                                    selecM.checked = false;
                                    Sonidito.pause();
                                }
                            } else {
                                console.log("Error en la solicitud AJAX");
                            }
                        };
                        xhr.send();
                    });


    </script>
</html>
